{"version":3,"sources":["../../../test/testSimple/main.es6"],"names":["roleAndTask","library","RoleAndTask","setConfiguration","launchMasterSlaveConfigurationFile","path","resolve","__dirname","pathToEntryFile","subscribeToStateChange","state","getSlaveNorMaster","role","id","CONSTANT","DEFAULT_ROLES","MASTER_ROLE","console","log","name","boot"],"mappings":";;;;;;;;;;AAKA;;;;AAEA;;;;;;AAPA;AACA;AACA;;AAEA;AAKA,IAAMA,cAAc,IAAIC,kBAAQC,WAAZ,EAApB;;AAEA;AACAF,YAAYG,gBAAZ,CAA6B;AAC3B;AACA;AACAC,sCAAuCC,eAAKC,OAAL,CAAaC,SAAb,CAAvC,wDAH2B;;AAK3B;AACAC,mBAAoBH,eAAKC,OAAL,CAAaC,SAAb,CAApB;AAN2B,CAA7B;;AASA;;;AAGAP,YAAYS,sBAAZ;AAAA,sFAAmC,iBAAOC,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAEdV,YAAYW,iBAAZ,EAFc;;AAAA;AAE3BC,gBAF2B;;;AAIjC,gBAAIA,QAAQA,KAAKC,EAAL,KAAYZ,kBAAQa,QAAR,CAAiBC,aAAjB,CAA+BC,WAA/B,CAA2CH,EAAnE,EAAuE;AACrEI,sBAAQC,GAAR,kBAA2BR,MAAMS,IAAjC,UAA0CT,MAAMG,EAAhD;AACD;;AANgC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAnC;;AAAA;AAAA;AAAA;AAAA;;AASA;;;AAGAb,YAAYoB,IAAZ","file":"main.js","sourcesContent":["//\n// Copyright (c) 2016 by Cotep. All Rights Reserved.\n//\n\n// Imports\nimport path from 'path';\n\nimport library from '../../src/Library.js';\n\nconst roleAndTask = new library.RoleAndTask();\n\n// Set the configuration of the library\nroleAndTask.setConfiguration({\n  // Mandatory\n  // Where the file describing the architecture to create is\n  launchMasterSlaveConfigurationFile: `${path.resolve(__dirname)}/../../../test/testSimple/minimalArchitecture.hjson`,\n\n  // Where is the file we use to launch the processes (the actual file)\n  pathToEntryFile: `${path.resolve(__dirname)}/main.js`,\n});\n\n/**\n * Subscribe to the state change and display it\n */\nroleAndTask.subscribeToStateChange(async (state) => {\n  // If we are in the master we display the state\n  const role = await roleAndTask.getSlaveNorMaster();\n\n  if (role && role.id === library.CONSTANT.DEFAULT_ROLES.MASTER_ROLE.id) {\n    console.log(`New State : ${state.name}/#${state.id}`);\n  }\n});\n\n/**\n * Startup the whole processus launch thing\n */\nroleAndTask.boot();\n"]}